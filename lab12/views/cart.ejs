<%- include("includes/head.ejs", { cartLength: cartLength, active: "cart"}) %>

<main class="container">
    <% cartProducts.forEach(product => { %>
        <div class="product-container">
            <div class="product-image">
                <img src="<%= product.thumbnail %>" alt="<%= product.title %>">
            </div>
            <div class="product-details">
                <h1><%= product.title %></h1>
                <p><%= product.description %></p>
                <div class="price-container">
                    <span class="original-price">$<%= product.price.toFixed(2) %></span>
                    <% if (product.discountPercentage > 0) { %>
                        <span class="discounted-price">$<%= (product.price * (1 - product.discountPercentage / 100)).toFixed(2) %></span>
                        <span class="discount-percentage">(<%= product.discountPercentage %>% off)</span>
                    <% } %>
                </div>
                <div class="rating-container">
                    <span class="rating">Rating: <%= product.rating %></span>
                    <span class="stock">Stock: <%= product.stock %> units available</span>
                </div>
                <div class="brand-category">
                    <span class="brand">Brand: <%= product.brand %></span>
                    <span class="category">Category: <%= product.category %></span>
                </div>
            </div>
        </div>
    <% }); %>

    <div class="total-price">
        <h2>Total a Pagar: $<%= totalPrice.toFixed(2) %></h2>
    </div>

    <a href="/cart/pay"> Realizar Compra </a>
</main>

<%- include("includes/foot.ejs") %>
